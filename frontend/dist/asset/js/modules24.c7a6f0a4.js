(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["modules24","modules26"],{"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},1438:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:""}},[a("v-container",[a("v-row",[a("v-col",[a("v-text-field",{attrs:{label:"资源路径",clearable:""},model:{value:t.filter.path,callback:function(e){t.$set(t.filter,"path",e)},expression:"filter.path"}})],1),a("v-col",[a("v-select",{attrs:{label:"操作权限",items:t.actions,clearable:""},model:{value:t.filter.action,callback:function(e){t.$set(t.filter,"action",e)},expression:"filter.action"}})],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.table.headers,items:t.table.items,options:t.table.options,"server-items-length":t.totalRecords,loading:t.table.loading,"loading-text":"努力加载中... 请稍等","no-data-text":"暂无数据","no-results-text":"未找到相关数据","footer-props":{showFirstLastPage:!0,"items-per-page-options":[5,10,15,20,50]}},on:{"update:options":function(e){return t.$set(t.table,"options",e)}},scopedSlots:t._u([{key:"top",fn:function(){return[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[t._v("权限管理")]),a("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),a("v-btn",{directives:[{name:"permission",rawName:"v-permission",value:"resource:edit",expression:"'resource:edit'"}],attrs:{color:"primary",dark:""},on:{click:function(e){return e.stopPropagation(),t.newItem(e)}}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("新建权限 ")],1),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:""},on:{click:t.fetchData}},[a("v-icon",{attrs:{left:""}},[t._v("mdi-magnify")]),t._v("查询 ")],1)],1)]},proxy:!0},{key:"item.actions",fn:function(e){var o=e.item;return[a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.showItem(o)}}},r),[t._v("mdi-eye")])]}}],null,!0)},[a("span",[t._v("查看权限")])]),a("v-tooltip",{directives:[{name:"permission",rawName:"v-permission",value:"resource:delete",expression:"'resource:delete'"}],attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-icon",t._g({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.deleteItem(o)}}},r),[t._v("mdi-delete")])]}}],null,!0)},[a("span",[t._v("删除权限")])])]}}])}),a("resource-form",{ref:"resourceForm",on:{afterSave:t.fetchData}})],1)},r=[],i=(a("4de4"),a("b9db")),n=a("a2d8"),s=a("ed08"),l={components:{ResourceForm:n["default"]},data:function(){return{actions:[{text:"GET",value:"GET"},{text:"POST",value:"POST"},{text:"PATCH",value:"PATCH"},{text:"DELETE",value:"DELETE"}],filter:{name:"",role:""},table:{options:{},loading:!1,headers:[{text:"ID",value:"id"},{text:"资源路径",value:"path"},{text:"操作权限",value:"action"},{text:"创建时间",value:"created_at"},{text:"更新时间",value:"updated_at"},{text:"操作",value:"actions",sortable:!1}],items:[]},totalRecords:0}},watch:{"table.options":{handler:function(){this.fetchData()},deep:!0}},methods:{fetchData:function(){var t=this;this.editDialog=!1,this.selectId=null,this.table.loading=!0,i["c"](this.table.options,this.filter).then((function(e){var a=e.data;t.table.loading=!1,t.table.items=a.data,t.totalRecords=a.total}))},newItem:function(){this.$refs.resourceForm.showForm()},showItem:function(t){this.$refs.resourceForm.showForm(t.id)},deleteItem:function(t){var e=this;this.$root.$confirm("确认消息","要删除该记录吗？已分配权限会失效。").then((function(a){a&&i["d"](t.id).then((function(){Object(s["b"])("删除成功"),e.fetchData()}))}))}}},c=l,d=a("2877"),u=a("6544"),v=a.n(u),f=a("8336"),m=a("62ad"),p=a("a523"),b=a("8fea"),h=a("ce7e"),x=a("132d"),T=a("0fd9"),_=a("b974"),g=a("2fa4"),V=a("8654"),E=a("71d9"),k=a("2a7f"),y=a("3a2f"),w=Object(d["a"])(c,o,r,!1,null,null,null);e["default"]=w.exports;v()(w,{VBtn:f["a"],VCol:m["a"],VContainer:p["a"],VDataTable:b["a"],VDivider:h["a"],VIcon:x["a"],VRow:T["a"],VSelect:_["a"],VSpacer:g["a"],VTextField:V["a"],VToolbar:E["a"],VToolbarTitle:k["b"],VTooltip:y["a"]})},"841c":function(t,e,a){"use strict";var o=a("d784"),r=a("825a"),i=a("1d80"),n=a("129f"),s=a("14c3");o("search",1,(function(t,e,a){return[function(e){var a=i(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,a):new RegExp(e)[t](String(a))},function(t){var o=a(e,t,this);if(o.done)return o.value;var i=r(t),l=String(this),c=i.lastIndex;n(c,0)||(i.lastIndex=0);var d=s(i,l);return n(i.lastIndex,c)||(i.lastIndex=c),null===d?-1:d.index}]}))},a2d8:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{"max-width":"500px",scrollable:""},on:{input:t.dialogClose},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("ValidationObserver",{ref:"observer",scopedSlots:t._u([{key:"default",fn:function(e){var o=e.handleSubmit;return[a("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),o(t.save)}}},[a("v-card-title",[a("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("VTextFieldWithValidation",{attrs:{label:"资源路径",rules:"required|max:64",readonly:t.isEditForm,clearable:"create"==t.formType,counter:""},model:{value:t.item.path,callback:function(e){t.$set(t.item,"path",e)},expression:"item.path"}})],1),a("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[a("ValidationProvider",{attrs:{name:"操作权限",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.valid,r=e.errors;return[a("v-select",{attrs:{label:"操作权限",items:t.actions,readonly:t.isEditForm,clearable:!t.isEditForm,success:o,"error-messages":r},model:{value:t.item.action,callback:function(e){t.$set(t.item,"action",e)},expression:"item.action"}})]}}],null,!0)})],1),t.isEditForm?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{readonly:"",disabled:"",label:"创建时间"},model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}})],1):t._e(),t.isEditForm?a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{readonly:"",disabled:"",label:"更新时间"},model:{value:t.item.updated_at,callback:function(e){t.$set(t.item,"updated_at",e)},expression:"item.updated_at"}})],1):t._e()],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){return e.stopPropagation(),t.close(e)}}},[t._v("关闭")]),t.isEditForm?t._e():a("v-btn",{attrs:{color:"blue darken-1",text:"",type:"subbmit"}},[t._v("保存")])],1)],1)]}}])})],1)],1)},r=[],i=a("7bb1"),n=a("dee4"),s=a("b9db"),l=a("ed08"),c={components:{ValidationObserver:i["a"],ValidationProvider:i["b"],VTextFieldWithValidation:n["a"]},data:function(){return{actions:[{text:"GET",value:"GET"},{text:"POST",value:"POST"},{text:"PATCH",value:"PATCH"},{text:"DELETE",value:"DELETE"}],formType:"create",dialog:!1,item:{}}},computed:{isEditForm:function(){return"edit"==this.formType},formTitle:function(){return this.isEditForm?"权限详情":"新建权限"}},methods:{showForm:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?(this.formType="edit",this.getItem(t),this.item.id=t):this.formType="create",this.dialog=!0},dialogClose:function(t){0==t&&this.close()},close:function(){var t=this;this.dialog=!1,this.item={},this.$nextTick((function(){t.$refs.observer.reset()}))},getItem:function(t){var e=this;s["b"](t).then((function(t){var a=t.data;e.item=a}))},save:function(){var t=this;s["a"](this.item).then((function(e){var a=e.data;t.close(),a&&(Object(l["b"])("保存成功"),t.$emit("afterSave"))}))}}},d=c,u=a("2877"),v=a("6544"),f=a.n(v),m=a("8336"),p=a("b0af"),b=a("99d9"),h=a("62ad"),x=a("a523"),T=a("169a"),_=a("4bd4"),g=a("0fd9"),V=a("b974"),E=a("2fa4"),k=a("8654"),y=Object(u["a"])(d,o,r,!1,null,null,null);e["default"]=y.exports;f()(y,{VBtn:m["a"],VCard:p["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:b["c"],VCol:h["a"],VContainer:x["a"],VDialog:T["a"],VForm:_["a"],VRow:g["a"],VSelect:V["a"],VSpacer:E["a"],VTextField:k["a"]})},b9db:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return l}));var o=a("751a"),r=a("ed08"),i=function(t,e){var a=Object(r["a"])(t,e);return o["a"].get("/sys/resources",{params:a})},n=function(t){return o["a"].post("/sys/resources",t)},s=function(t){return o["a"].get("/sys/resources/"+t)},l=function(t){return o["a"].delete("/sys/resources/"+t)}}}]);